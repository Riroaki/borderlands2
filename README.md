# Borderlands 2 Save File Modification Tool

## First, a note about this fork

This repository is a fork of the original at https://github.com/pclifford/borderlands2

The most immediate change you'll notice is that the commandline arguments have
changed from the original, so you'll have to get used to a slightly different
way of specifying what you're doing, though in my opinion the new way is
cleaner.  There's also a number of new things you can change in your savegame
files without editing JSON directly, which might be of interest.

Perhaps a more important and less-noticeable change is that this fork defaults
to the file format that works on PC, rather than on Consoles.  PCs and
consoles use different "endianness" on their storage - PC uses "little-endian"
and consoles use "big-endian."  The original utility defaults to big-endian
and requires you to use the commandline argument `-l` to switch.  This fork,
instead, defaults to little-endian and requires you to use the commandline
argument `-b` to switch.  It's worth noting that some of the changes that have
been made have not actually been tested on consoles, so it's possible that
they won't work.  If that turns out to be the case, contact me and I'd be
happy to try and fix it.

Note too that the JSON generated by this fork isn't going to be compatible
with the JSON generated by the main branch, so don't try to mix between the
two.

## Read and write Borderlands 2 save files

A simple command line utility to extract player information from a Borderlands
2 save file, or to create a new save file from player information.

Note the following before trying to use it:

* It has no graphical interface and is not easy to use
* It does not provide any mechanisms for creating items or weapons
* It is a proof of concept and will corrupt your save files if used improperly
* It requires a working Python 2 interpreter (2.6 or later, not 3)

## Input and output

By default, the utility will both read and write files which should be usable
by Borderlands itself.  The following would basically do nothing but copy the
savegame `save0001.sav` to `save0002.sav`:

    python savefile.py save0001.sav save0002.sav

You can instead specify one of the following output formats using `-o` or
`--output`:

* **`savegame`** - The default if no output is specified *(this is the only
  version which is readable by Borderlands itself)*
* **`decoded`** - The raw protocol buffer data.  A little bit easier to
  work with programmatically, but not much use to humans.
* **`json`** - Write out the savegame in JSON format, which is a
  human-editable format, though some parts of the file would remain difficult
  to edit by hand.
* **`parsed`** - This is also stored in JSON, but has many of the more complex
  parts of the file parsed out in a way which makes hand-editing much easier.
  If you'd like to make a bunch of changes on an easy text file, this is what
  you'd want to use most of the time.
* **`items`** - This will save the character's inventory and bank into a text
  file which can then be imported into other tools like Gibbed, or imported
  into other characters using this tool.

Examples include:

    python savefile.py -o json save0001.sav testing.json
    python savefile.py --output parsed save0001.sav testing2.json
    python savefile.py -o items save0001.save items.txt

If you've saved a file as JSON (either with the `json` or `parsed` options),
made some changes, and want to convert it back into a valid Bordlerlands
savefile, specify the `-j` or `--json` option, like so:

    python savefile.py -j testing2.json save0002.sav
    python savefile.py --json testing.json save0002.sav

## How do I modify values in a save file?

One method to alter your savegames is by saving the file as a JSON file.
Using `-o parsed`, as detailed above, is your best bet if you choose to go
this route.

Alternatively, you can alter many attributes of your character by just using
commandline options.  You can specify as few or as many of these as you want.
Note that if you specify `-o items` to save a character's items to a text
file, the majority of these options will have no effect.

### Character Name

This can be done with the `--name` option:

    python savefile.py --name "Gregor Samsa" old.sav new.sav

### Save Game ID

This is probably not actually useful; Borderlands seems to automatically set
this to a value it thinks is appropriate.  The ID tends to match the filename,
though, and I personally end up setting it just because it seems to make sense
to.  You'll probably be fine if you never touch this option.  It can be
changed with `--save-game-id` like so:

    python savefile.py --save-game-id 2 save0001.sav save0002.sav

### Character Level

This will also update your character's XP if needed, and is available with the
`--level` option:

    python savefile.py --level 72 old.sav new.sav

### Money

Set money with the `--money` option:

    python savefile.py --money 3000000 old.sav new.sav

### Eridium

Set available Eridium with the `--eridium` option.  Note that the game will
reduce this to a maxmimum of 500 if you attempt to add more:

    python savefile.py --eridium 500 old.sav new.sav

### Seraph Crystals

Set the available Seraph Crystals with the `--seraph` option.  The game will
enforce a maximum of 999:

    python savefile.py --seraph 999 old.sav new.sav

### Torgue Tokens

Set the available Torgue Tokens with the `--torgue` option.  The game will
enforce a maximum of 999:

    python savefile.py --torgue 999 old.sav new.sav

### Item Levels

The `--itemlevels` argument can be used to set all items in your inventory to
either your character's current level, or to the level you specify.

To set to the character's level:

    python savefile.py --itemlevels old.sav new.sav

To set to a specific level:

    python savefile.py --itemlevels 50 old.sav new.sav

Note that items of level 1, however, are always left alone.

### Backpack Size

The `--backpack` option can be used to set the size of your backpack.  It will
default to the largest available size ingame: 39.  Note that the utility will
also enforce that the backpack size is a multiple of 3, and will round up if
your specified size is not correct.

    python savefile.py --backpack old.sav new.sav
    python savefile.py --backpack 31 old.sav new.sav

### Bank Size

Similarly, the `--bank` option can be used to set the size of your bank, and
will round up to multiples of 2.  Unlike `--backpack`, there's no default, so
a number must be specified:

    python savefile.py --bank 16 old.sav new.sav

### Gun Slots

The `--gunslots` option can be used to set the total number of open gun slots
(ordinarily unlocked via story missions).  Valid values are 2, 3, and 4:

    python savefile.py --gunslots 2 old.sav new.sav
    python savefile.py --gunslots 3 old.sav new.sav
    python savefile.py --gunslots 4 old.sav new.sav

### Unlocks

There are a few things which can be unlocked via this utility, with the `--unlock`
option.  This option can be specified more than once to unlock more than one
thing.

#### Challenges

Some challenges do not actually appear in the challenge list until certain
prerequisites are met.  For instance, the challenge for long-range shotgun
kills doesn't actually appear until the challenge for short-range shotgun
kills has reached level 5.  This will unlock all those challenges regardless
of the prerequisites.  *(Note: this only applies to non-level-specific
challenges)*

    python savefile --unlock challenges old.sav new.sav

#### True Vault Hunter Mode (playthrough 2)

To unlock TVHM:

    python savefile.py --unlock tvhm old.sav new.sav

#### Slaughterdome

**NOTE:** This actually probably does not work, need to test it.  Regardless,
the Creature Slaughterdome might be unlockable with:

    python savefile.py --unlock slaughterdome old.sav new.sav

### Challenge Levels

This option is admittedly rather silly, but the `--challenges` argument will
let you set your character's challenge levels to the specified values.  The
valid options are:

* zero
* max
* bonus

If set to `zero`, the level of all your non-level-specific challenges will be
reset to zero, so you can start accumulating again.  (Possibly useful if you
want to start from scratch but haven't completed enough to use the in-game
reset.)

    python savefile.py --challenges zero old.sav new.sav

If set to `max`, the level of all non-level-specific challenges will be set to
*one under* than their maximum level, possibly making it easier to accrue a
good deal of Badass Rank very quickly.

    python savefile.py --challenges max old.sav new.sav

If set to `bonus`, the level of all non-level-specific challenges will be set
to *one under* the levels at which they provide bonus skins/heads, for the
challenges which do so.  It will leave all other challenges alone.

    python savefile.py --challenges bonus old.sav new.sav

It's also possible to specify both `max` and `bonus`, in which case all
challenges will be set just under their completion level, except for the ones
which provide bonuses, which will then be set to be primed to receive those
bonuses:

    python savefile.py --challenges max --challenges bonus old.sav new.sav

## Combining Options

In general, the various options can be combined.  To make a few changes to a
savegame but save as parsed JSON:

    python savefile.py --name "Laura Palmer" --save-game-id 2 --money 3000000 --output parsed save0001.sav laura.json

To take that JSON, unlock TVHM and Challenges, and set challenges to their
primed "bonus" levels, and save as a real savefile:

    python savefile.py --json --unlock tvhm --unlock challenges --challenges bonus laura.json save0002.sav

## Working with Savegames to/from Consoles

**NOTE:** As mentioned above, this fork has not actually been tested on
Consoles, so it's possible that the generated savegames might not work.  Use
at your own risk!

The safest way to convert a PC savegame to Console, or vice-versa, would be to
use JSON as an intermediate step.  For the commands which deal with the
console savegames, be sure to specify the `-b` or `--bigendian` options.  For
instance, to convert from a Console savegame to a PC savegame:

    python savegame.py -b -o parsed xbox.sav pc.json
    python savegame.py -j pc.json pc.sav

Or to convert from a PC savegame to a Console savegame:

    python savegame.py --output parsed pc.sav xbox.json
    python savegame.py --json --bigendian xbox.json xbox.sav

## Exporting character items

All items stored and held in the character's bank or inventory can be exported
to a text file as a list of codes, in a format compatible with Gibbed's save
editor.  This is accomplished with `-o items` or `--output items` like so:

    python savefile.py -o items savegame.sav items.txt

## Importing character items

**NOTE:** This hasn't been extensively tested in awhile, and may not totally
work properly.

A text file of codes generated as above, or assembled by hand, can be imported
into a character using the `-i` or `--import-items` arguments, like so:

    python savefile.py -i items.txt old.sav new.sav
    python savefile.py --import-items items.txt old.sav new.sav

By default all items will be inserted into the inventory, but this can be
changed with a line containing "; Bank" to indicate that all following items
should go into the bank, or one of either "; Weapons" or "; Items" to indicate
that all following items should go into the inventory.  For example, importing
a file containing the following will put a Vault Hunter's Relic into the
inventory and a Righteous Infinity pistol into the bank:

    ; Bank
    BL2(h0Hd1Z+jY/s2Qy++Zu8Ba9qXoOmjwJ6NhrlsOmhNMX+oJo5CfQns)
    ; Items
    BL2(B2vuv4tz1zSQCf2pqLJCS5XD/tKN4FXpjRJLnn1v85U=)

