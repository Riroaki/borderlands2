# WARNING ABOUT THIS FORK

I've forked this over from pclifford/borderlands2 primarily to add in some
support for editing savegames' challenge data.  Mostly of use to someone who
is looking to beef up their Badass Ranks (though using a profile.dat editor
would be a much simpler way of doing so), or if someone wanted to set up
their character to more easily unlock all the various skins/heads that you
get while working your way through the challenges (though I believe the
aforementioned profile.dat editor can unlock all those, too, and you could
also get those via some editing in Gibbed if that's your thing).

So: it's a bit silly, but here it is regardless.

**WARNING:** This fork currently only supports little-endian (PC) savegame
files, 'cause the processing just hardcodes for little-endian.  As it is,
don't expect a game saved with this fork to work on non-PC platforms.
Additionally, you must save using --little-endian or -l, or the file will
not work even on PC.  (For all the time I've spent disclaiming this fact
in this README, I probably could've just fixed the endianness to Do The Right
Thing...)

**ALSO:** The JSON, etc, generated by this fork won't be compatible with the JSON
generated by the main branch, 'cause the "stats" layout's completely changed.

**ALSO ALSO:** I have not tried this on a savegame created on a copy which doesn't
have all four of the main DLCs enabled.  I suspect that it would work fine
still, but I don't know.

# Read and write Borderlands 2 save files

A simple command line utility to extract player information from a Borderlands
2 save file, or to create a new save file from player information.

Note the following before trying to use it:

* It has no graphical interface and is not easy to use
* It does not provide any mechanisms for creating items or weapons
* It is a proof of concept and will corrupt your save files if used improperly
* It requires a working Python 2 interpreter (2.6 or later, not 3)

## How do I modify values in a save file?

**WARNING AGAIN:** Currently this fork will only generate little-endian
files properly.  Save using the --little-endian flag or the file will not
work on PC, too!

Modify save file data by changing one or more of "level", "skillpoints",
"money", "eridium", "seraph", "tokens", "gunslots", "backpack", "bank",
"unlocks", or "itemlevels":

    python savefile.py -m eridium=99 old.sav new.sav

Set the levels of all your items and weapons (except those at level 1, which
are left alone) to match your character's level:

    python savefile.py -m itemlevels old.sav new.sav

Or to a specific level:

    python savefile.py -m itemlevels=20 old.sav new.sav

Set the number of guns your character can have equipped to 2, 3, or 4:

    python savefile.py -m gunslots=4 old.sav new.sav

Set the size of your character's backpack, and the corresponding number of
purchased backpack SDUs:

    python savefile.py -m backpack=27 old.sav new.sav

Set the size of your character's bank, and the corresponding number of
purchased bank SDUs:

    python savefile.py -m bank=16 old.sav new.sav

Unlock the Creature Slaughter Dome (Natural Selection Annex):

    python savefile.py -m unlocks=slaughterdome old.sav new.sav

Unlock the True Vault Hunter mode:

    python savefile.py -m unlocks=truevaulthunter old.sav new.sav

Unlock both at once:

    python savefile.py -m unlocks=slaughterdome:truevaulthunter old.sav new.sav

Unlock all non-level-specific challenges:

    python savefile.py -m unlocks=challenges old.sav new.sav

Set all your non-level-specific challenges to one under their maximum value (you'll
probably want to unlock all challenges at the same time, if you do this):

    python savefile.py -m challenges=max old.sav new.sav

Set all the challenges which have skin/head bonuses to be one under the value which
provides those bonuses:

    python savefile.py -m challenges=bonus old.sav new.sav

To zero out all non-location-specific challenges:

    python savefile.py -m challenges=zero old.sav new.sav

To change the character's name:

    python savefile.py -m "name=Mrs. Henderson" old.sav new.sav

To change the character's save slot (I believe this is overridden by the game itself,
rather than used from this save file, but I always go ahead and updte it anyway):

    python savefile.py -m save_game_id=12 old.sav new.sav

Or many changes at once, separated by commas:

    python savefile.py -m level=7,skillpoints=42,money=1234,eridium=12,seraph=120,itemlevels old.sav new.sav

Add --little-endian to write the save file in a format that should be readable
by the PC version (the default is to write the data in big-endian format, for
the console versions):

    python savefile.py -m eridium=99 --little-endian old.sav new.sav

## How do I convert a PC save to work on a console?

**WARNING AGAIN:** This will not work properly, currently, with this fork!

A PC save file is automatically detected and read, and the default is to write
in the correct format for a console.  If you don't want to make any changes
except to the format:

    python savefile.py -m "" pc.sav console.sav

## How do I convert a console save to work on a PC?

As before, add --little-endian to the command to write the data in a format
suitable for the PC.  If you don't want to make any changes except to the
format:

    python savefile.py -m "" --little-endian console.sav pc.sav

## How do I take a copy of all my character's items?

All items stored and held in the character's bank or inventory can be exported
to a text file as a list of codes, in a format compatible with Gibbed's save
editor:

    python savefile.py -e items.txt your-save-game.sav

## How do I import those items back into a character?

**WARNING AGAIN:** Currently this fork will only generate little-endian
files properly.  Save using the --little-endian flag or the file will not
work on PC, too!

A text file of codes generated as above, or assembled by hand, can be imported
into a character like so:

    python savefile.py -i items.txt old.sav new.sav

(Don't forget to add --little-endian if you're creating a save file for the PC
version.)

By default all items will be inserted into the inventory, but this can be
changed with a line containing "; Bank" to indicate that all following items
should go into the bank, or one of either "; Weapons" or "; Items" to indicate
that all following items should go into the inventory.  For example, importing
a file containing the following will put a Vault Hunter's Relic into the
inventory and a Righteous Infinity pistol into the bank:

    ; Bank
    BL2(h0Hd1Z+jY/s2Qy++Zu8Ba9qXoOmjwJ6NhrlsOmhNMX+oJo5CfQns)
    ; Items
    BL2(B2vuv4tz1zSQCf2pqLJCS5XD/tKN4FXpjRJLnn1v85U=)

## How do I just extract the player data?

Extract the raw protocol buffer data from a save file:

    python savefile.py -d your-save-game.sav player.p

Extract the data in JSON format (encoded purely to preserve all the raw
information -- not very readable):

    python savefile.py -d -j your-save-game.sav player.json

Extract the data in JSON format, applying further parsing to make the data as
readable as possible:

    python savefile.py -d -j -p your-save-game.sav player.json

It may help to copy and paste the contents of the .json file into a site like
http://www.jsoneditoronline.org/ in order to view or modify the contents, to
ensure that the necessary JSON formatting is preserved.

Note that if you modify any of the data you extract in this way there is a very
high probability that you will corrupt your save file.  Please make sure you
have a backup first.

## How do I write the player data back to a new save file?

**WARNING AGAIN:** Currently this fork will only generate little-endian
files properly.  Save using the --little-endian flag or the file will not
work on PC, too!

Create a new save file from protocol buffer data:

    python savefile.py player.p your-new-save-game.sav

Create a new save file from the JSON data:

    python savefile.py -j player.json your-new-save-game.sav

As before, to write a save file that can be read by the PC version add the
--little-endian flag to one of the above, eg:

    python savefile.py -j --little-endian player.json your-new-save-game.sav
